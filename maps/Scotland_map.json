{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "Choropleth map of Scotland showing economic inactivity rate by Local Authority District.",
  "title": {"text": "Scotland Economic Inactivity Rate by Local Authority (2023)", 
            "fontSize": 16},
  "width": 350,
  "height": 450,
  "data": {
    "url": "https://raw.githubusercontent.com/jhellingsdata/RADataHub/refs/heads/main/MappingWorkshop/geo_data/LAD_SCT_2025_05.topojson",
    "format": { "type": "topojson", "feature": "object_name" }
  },
  "transform": [
    {
      "lookup": "properties.LAD25CD",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/nicolasrojasv/nicolasrojasv.github.io/refs/heads/main/data/economic-inactivity-rate-map-data.csv",
          "format": { "type": "dsv", "delimiter": ";",
          "parse": { "year": "number", "value": "number" }
           }
        },
        "key": "area_code",
        "fields": ["value", "year"]
      }
    },
    {
      "filter": "datum['year'] == 2023"
    }
  ],
  "mark": {
    "type": "geoshape",
    "stroke": "white",
    "strokeWidth": 0.5
  },
  "encoding": {
    "color": {
      "field": "value",
      "type": "quantitative",
      "scale": { "scheme": "blueorange" },
      "title": "Inactivity rate (%)"
    },
    "tooltip": [
      {
        "field": "properties.LAD25NM",
        "type": "nominal",
        "title": "Local Authority District"
      },
      {
        "field": "value",
        "type": "quantitative",
        "title": "Inactivity rate (%)",
        "format": ".1f"
      }
    ]
  },
  "projection": { "type": "mercator" }
}