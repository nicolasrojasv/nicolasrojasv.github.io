{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "description": "Hourly apparent temperature in London from Open-Meteo API.",
  "title": {
    "text": "Hourly Apparent Temperature in London",
    "fontSize": 18,
    "subtitle": "Forecast for the next seven days (Open-Meteo API)"
  },
  "width": 450,
  "height": 300,
  "background": "#f7f7f7",
  "view": {"fill": "#f7f7f7", "strokeOpacity": 0, "stroke": null},
  "data": {
    "url": "https://api.open-meteo.com/v1/forecast?latitude=51.5&longitude=-0.1&hourly=apparent_temperature,relativehumidity_2m&forecast_days=7&timezone=Europe%2FLondon",
    "format": {"type": "json"}
  },
  "transform": [
    {
      "flatten": [
        "hourly.time",
        "hourly.apparent_temperature",
        "hourly.relativehumidity_2m"
      ],
      "as": ["time", "temperature", "humidity"]
    },
    {"calculate": "toDate(datum.time)", "as": "date"}
  ],
  "mark": {
    "type": "line",
    "color": "#0072B2",
    "strokeWidth": 2,
    "curve": "monotone"
  },
  "encoding": {
    "x": {
      "field": "date",
      "type": "temporal",
      "axis": {"title": null, "labelAngle": 0, "grid": false}
    },
    "y": {
      "field": "temperature",
      "type": "quantitative",
      "axis": {"title": "Temperature (°C)", "grid": false}
    },
    "tooltip": [
      {"field": "date", "type": "temporal", "title": "Date"},
      {
        "field": "temperature",
        "type": "quantitative",
        "title": "Temperature (°C)"
      }
    ]
  },
  "config": {"font": "Calibri"}
}